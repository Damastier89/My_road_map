# API

- [Что такое API?](#what-is-an-api)
- [Как работает RESTful API?](#restful-api)
- [Аутентификации c RESTful API](#authentication-in-the-restful-api)
- [Отличия и основные особенности различных видов API](#differences-and-main-features-of-the-api)

## What is an API?

> `API`, или интерфейс прикладного программирования `Application Programming Interface`, — это набор правил и протоколов, позволяющих разным программам взаимодействовать друг с другом.

> API определяет методы, через которые одна программа может запрашивать данные или функции у другой программы, что позволяет разработчикам использовать внешние сервисы и функции без необходимости разрабатывать их с нуля. Например, когда вы используете приложение для погоды, оно может обращаться к API, предоставляемому метеорологической службой, чтобы получить актуальные данные о погоде.

> Клиент в API может быть представлен различными сущностями, в зависимости от контекста и архитектуры приложения. Вот несколько примеров:

- `Веб-приложение`: Клиент может быть браузерным приложением, которое делает запросы к API для получения данных или выполнения действий.

- `Мобильное приложение`: Мобильные приложения также могут выступать в роли клиентов, обращаясь к API для получения информации и обновления данных.

- `Серверное приложение`: В серверной архитектуре одно приложение или служба могут выступать в роли клиента, взаимодействуя с другими API для выполнения задач или интеграции с другими системами.

- `Клиентская библиотека`: Это может быть программный код (например, на Python или JavaScript), который упрощает взаимодействие с API. Такие библиотеки умеют управлять запросами, аутентификацией и обработкой ответов.

> В контексте `API` (интерфейса программирования приложений) ресурсом называют любую сущность, с которой можно взаимодействовать через `API`. Это могут быть объекты, данные или даже услуги, которые доступны для обработки. Например, в `RESTful API` ресурсы могут представлять пользователей, статьи, заказы и т. д.

> Каждый ресурс обычно имеет уникальный идентификатор, такой как `URL`, и может поддерживать различные `HTTP-методы (как GET, POST, PUT, DELETE)` для выполнения различных операций.

[Вернуться к началу статьи](#api)

---

## RESTful API

> `RESTful API` (Representational State Transfer) работает по ряду принципов и стандартов, обеспечивая взаимодействие между клиентом и сервером. Вот четыре основных этапа запроса к `RESTful API`

1. `Создание запроса`: Клиент (например, веб-приложение или мобильное приложение) формирует HTTP-запрос к серверу. Запрос содержит:

- Метод `GET, POST, PUT, DELETE, CONNECT, OPTIONS, PATCH` для указания типа операции.
- `URL (Uniform Resource Locator)` для идентификации ресурса.
- Заголовки `Headers`, которые могут содержать информацию о типе контента, авторизации и т.д.
- Тело запроса `Body` для передачи данных (например, при POST или PUT).

2. `Отправка запроса`: Клиент отправляет сформированный HTTP-запрос на сервер. Этот запрос проходит через сеть и достигает сервера, который обрабатывает его.

3. `Обработка запроса на сервере`: Сервер принимает запрос, анализирует его и выполняет нужные операции с ресурсами. Это может включать извлечение данных из базы данных, обновление информации или удаление ресурса.

4. `Возвращение ответа`: Сервер формирует ответ в формате, который может быть легко обработан клиентом (обычно JSON или XML). Ответ включает код состояния HTTP (например, 200 для успешного запроса, 404 для не найденного ресурса и т.д.) и данные о ресурсе (если это уместно).

### Виды HTTP запросов

- `GET`: Используется для запроса данных с сервера. Запрос не изменяет состояние сервера и может быть кэширован. Пример: получение списка пользователей.

- `POST`: Используется для отправки данных на сервер, например, для создания нового ресурса. Запрос может изменить состояние сервера. Пример: создание нового пользователя.

- `PUT`: Используется для обновления существующего ресурса на сервере. Если ресурса нет, может создать его. Пример: обновление информации о пользователе.

- `DELETE`: Используется для удаления ресурса с сервера. Пример: удаление пользователя.

- `PATCH`: Используется для частичного обновления ресурса. В отличие от PUT, который требует полного обновления, PATCH изменяет только указанные поля. Пример: изменение только адреса пользователя.

- `HEAD`: Запрашивает только заголовки ответа, не загружая тело. Это полезно для получения метаданных о ресурсе без его содержимого. Пример: проверка наличия ресурса.

- `OPTIONS`: Запрашивает доступные методы для конкретного ресурса. Это используется для определения, какие операции можно выполнять. Пример: получение поддерживаемых методов для API.

[Вернуться к началу статьи](#api)

---

## Authentication in the RESTful API

- `HTTP-аутентификация`:
  Это общее название для механизма аутентификации, который использует заголовки HTTP для передачи учетных данных. Наиболее распространенные методы включают в себя базовую и дигест-аутентификацию. Сервер посылает клиенту код состояния 401 (Unauthorized) с заголовком WWW-Authenticate, чтобы запросить у клиента учетные данные.

- `Базовая аутентификация (Basic Authentication)`:
  Этот метод передает учетные данные (имя пользователя и пароль) в заголовке Authorization. Учетные данные кодируются в Base64. Хотя это просто и быстро, данный метод не безопасен, если используется без HTTPS, так как данные могут быть перехвачены. Пример заголовка: Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=.

- `Аутентификация носителя (Bearer Authentication)`:
  Этот метод передает токен аутентификации в заголовке Authorization в виде: Authorization: Bearer <токен>. Токены, как правило, имеют срок действия и используются для безопасного доступа к ресурсу без передачи учетных данных пользователем каждый раз. Это часто применяется в сочетании с OAuth.

- `Ключи API (API Keys)`:
  Это простой способ аутентификации, при котором клиент получает уникальный ключ, который передается с каждым запросом, обычно в заголовке или в параметрах URL. Например, GET /resource?api_key=YOUR_API_KEY. Этот метод удобен и прост в использовании, но требует осторожности, так как ключи необходимо защищать от несанкционированного доступа.

- `OAuth`:
  Это более сложный, но и более безопасный протокол аутентификации, который позволяет сторонним приложениям получать ограниченный доступ к API без передачи учетных данных пользователя. OAuth использует токены доступа, которые могут иметь разные права и сроки действия. Процесс аутентификации часто включает в себя различные этапы: получение кодов авторизации, обмен их на токены доступа и использование этих токенов для выполнения запросов. Важно для приложений, работающих с личными данными.

[Вернуться к началу статьи](#api)

---

## Differences and main features of the API

1. `REST API`:

- Определение: Representational State Transfer (REST) — это архитектурный стиль, который использует стандартные HTTP методы (GET, POST, PUT, DELETE) для работы с ресурсами.

- Особенности:
  - Работает с ресурсами, представленные по URL.
  - Статус ответа передает информацию о результате операции (например, 200 OK, 404 Not Found).
  - Может возвращать данные в различных форматах, включая JSON и XML.
  - Идеален для построения масштабируемых и распределенных систем.

2. `JSON API`:

- Определение: Это спецификация для создания APIs, использующих JSON в качестве формата передачи данных.

- Особенности:
  - Упрощает взаимодействие клиента и сервера, устраняя необходимость в избыточных запросах.
  - Использует строгую структуру для запросов и ответов, что упрощает обработку данных.
  - Поддерживает множественные ресурсы в одном запросе и предоставляет средства для сортировки, фильтрации и пагинации.
  - Следует четким стандартам по структуре, что облегчает интеграцию.

3. `JSON-RPC`:

- Определение: Это легковесный протокол удаленного вызова процедур (RPC), в котором используется JSON в качестве основного формата обмена данными.

- Особенности:
  - Позволяет клиенту вызывать методы на сервере, передавая их имя и параметры в формате JSON.
  - Все запросы и ответы являются JSON-объектами, что делает его простым и удобным для работы.
  - Не зависит от структуры URL, как в REST, и может использоваться для передачи более сложных операций и методов.
  - Более подходящий для сценариев, где требуется частый и сложный обмен данными.

4. `GraphQL`:

- Определение: Язык запросов для APIs, который позволяет клиентам запрашивать только те данные, которые им нужны, и ничего лишнего.

- Особенности:
  - Позволяет клиентам формулировать запросы с использованием гибкой структуры, что уменьшает количество запросов к серверу.
  - Все запросы отправляются на один endpoint, и сервер возвращает данные, основанные на запросе клиента.
  - Поддерживает операции вложения, что позволяет градуировать запрашиваемые данные.
  - Чаще всего используется с схемами и типами, что облегчает документирование и тестирование.

[Вернуться к началу статьи](#api)

---
